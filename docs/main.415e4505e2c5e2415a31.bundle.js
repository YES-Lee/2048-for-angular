webpackJsonp([1],{"+h1B":function(n,t,e){"use strict";var o=e("/oeL"),r=e("aR8+"),l=e("wQAS"),u=e("q4dy"),a=e("qbdv"),i=e("fc+i"),s=e("bm2B"),c=e("CPp0"),f=e("Npun");e.d(t,"a",function(){return h});var h=o.b(r.a,[l.a],function(n){return o.c([o.d(512,o.e,o.f,[[8,[u.a]],[3,o.e],o.g]),o.d(5120,o.h,o.i,[[3,o.h]]),o.d(4608,a.a,a.b,[o.h]),o.d(4608,o.j,o.j,[]),o.d(5120,o.k,o.l,[]),o.d(5120,o.m,o.n,[]),o.d(5120,o.o,o.p,[]),o.d(4608,i.b,i.c,[a.c]),o.d(6144,o.q,null,[i.b]),o.d(4608,i.d,i.e,[]),o.d(5120,i.f,function(n,t,e,o){return[new i.g(n),new i.h(t),new i.i(e,o)]},[a.c,a.c,a.c,i.d]),o.d(4608,i.j,i.j,[i.f,o.r]),o.d(135680,i.k,i.k,[a.c]),o.d(4608,i.l,i.l,[i.j,i.k]),o.d(6144,o.s,null,[i.l]),o.d(6144,i.m,null,[i.k]),o.d(4608,o.t,o.t,[o.r]),o.d(4608,i.n,i.n,[a.c]),o.d(4608,i.o,i.o,[a.c]),o.d(4608,s.a,s.a,[]),o.d(4608,c.a,c.a,[]),o.d(4608,c.b,c.c,[]),o.d(5120,c.d,c.e,[]),o.d(4608,c.f,c.f,[c.a,c.b,c.d]),o.d(4608,c.g,c.h,[]),o.d(5120,c.i,c.j,[c.f,c.g]),o.d(4608,f.a,f.a,[]),o.d(512,a.d,a.d,[]),o.d(1024,o.u,i.p,[]),o.d(1024,o.v,function(n,t){return[i.q(n,t)]},[[2,i.r],[2,o.w]]),o.d(512,o.x,o.x,[[2,o.v]]),o.d(131584,o.y,o.y,[o.r,o.z,o.A,o.u,o.e,o.x]),o.d(2048,o.B,null,[o.y]),o.d(512,o.C,o.C,[o.B]),o.d(512,i.s,i.s,[[3,i.s]]),o.d(512,s.b,s.b,[]),o.d(512,s.c,s.c,[]),o.d(512,c.k,c.k,[]),o.d(512,r.a,r.a,[])])})},0:function(n,t,e){n.exports=e("cDNt")},NhKt:function(n,t,e){"use strict";e.d(t,"a",function(){return o});var o=['.game-container[_ngcontent-%COMP%]{position:absolute;width:440px;height:540px;top:0;left:0;bottom:0;right:0;margin:auto;color:#776e65;font-family:Clear Sans,Helvetica Neue,Arial,sans-serif}.game-header[_ngcontent-%COMP%]{height:120px}.game-header[_ngcontent-%COMP%] > .title[_ngcontent-%COMP%]{font-size:5.5em;line-height:120px;float:left;margin-right:20px}.score[_ngcontent-%COMP%]{font-size:1.5em;padding:20px}.btn-new-game[_ngcontent-%COMP%]{padding:10px;border:none;background:#776e65;color:#fff;border-radius:3px;cursor:pointer;font-weight:700}.game-body[_ngcontent-%COMP%]{width:400px;height:400px;background-color:#bbada0;border-radius:12px;padding:10px}.grid-cell[_ngcontent-%COMP%]{float:left;width:88px;height:88px;text-align:center;line-height:40px;padding:6px;background-color:hsla(30,37%,89%,.5);background-clip:content-box;border-radius:10px}.item-span[_ngcontent-%COMP%]{display:block;width:100%;height:100%;line-height:96px;font-weight:700;-webkit-animation-duration:.5s;animation-duration:.5s;-webkit-animation-delay:0s;animation-delay:0s;-webkit-animation-iteration-count:1;animation-iteration-count:1}.message-box[_ngcontent-%COMP%]{position:fixed;z-index:9999;width:100%;height:100%;background:rgba(0,0,0,.3)}.message-box[_ngcontent-%COMP%] > .message-body[_ngcontent-%COMP%]{height:100px;width:300px;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;background-color:#ffd180;border-radius:6px;background-clip:content-box;border:6px solid rgba(0,0,0,.3)}.message-box[_ngcontent-%COMP%] > .message-body[_ngcontent-%COMP%] > .message-content[_ngcontent-%COMP%]{width:100%;height:100%;line-height:100px;text-align:center;font-size:1.5em;color:#776e65;font-weight:700}.clearfix[_ngcontent-%COMP%]:after{content:"";display:block;height:0;clear:both;overflow:hidden}.clearfix[_ngcontent-%COMP%]{zoom:1}']},Npun:function(n,t,e){"use strict";var o=e("5v8a");e.n(o);e.d(t,"a",function(){return r});var r=function(){function n(){}return n.ctorParameters=function(){return[]},n}()},"aR8+":function(n,t,e){"use strict";e.d(t,"a",function(){return o});var o=function(){function n(){}return n}()},cDNt:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=e("/oeL"),r=e("p5Ee"),l=e("+h1B"),u=e("fc+i");r.a.production&&e.i(o.a)(),e.i(u.a)().bootstrapModuleFactory(l.a)},p5Ee:function(n,t,e){"use strict";e.d(t,"a",function(){return o});var o={production:!0}},q4dy:function(n,t,e){"use strict";function o(n){return c._17(0,[(n()(),c._18(0,null,null,3,"span",[["class","item-span animated"]],null,null,null,null,null)),c._19(278528,null,0,f.h,[c.m,c.o,c.Z,c._0],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),c._20({zoomIn:0}),(n()(),c._21(null,["\n          ","\n        "]))],function(n,t){n(t,1,0,"item-span animated",n(t,2,0,t.parent.context.$implicit.isNew))},function(n,t){n(t,3,0,t.parent.context.$implicit.value)})}function r(n){return c._17(0,[(n()(),c._18(0,null,null,5,"div",[["class","grid-cell"]],null,null,null,null,null)),c._19(278528,null,0,f.i,[c.o,c.Z,c._0],{ngStyle:[0,"ngStyle"]},null),(n()(),c._21(null,["\n        "])),(n()(),c._22(16777216,null,null,1,null,o)),c._19(16384,null,0,f.j,[c._2,c._3],{ngIf:[0,"ngIf"]},null),(n()(),c._21(null,["\n      "]))],function(n,t){n(t,1,0,t.component.gridCellStyle(t.context.$implicit.value)),n(t,4,0,0!==t.context.$implicit.value)},null)}function l(n){return c._17(0,[(n()(),c._18(0,null,null,4,"div",[["class","grid-row"]],null,null,null,null,null)),(n()(),c._21(null,["\n      "])),(n()(),c._22(16777216,null,null,1,null,r)),c._19(802816,null,0,f.k,[c._2,c._3,c.m],{ngForOf:[0,"ngForOf"]},null),(n()(),c._21(null,["\n    "]))],function(n,t){n(t,3,0,t.context.$implicit)},null)}function u(n){return c._17(0,[(n()(),c._18(0,[[1,0],["messageBox",1]],null,7,"div",[["class","message-box animated"]],null,[[null,"click"]],function(n,t,e){var o=!0,r=n.component;if("click"===t){o=!1!==r.hideMsg(e)&&o}return o},null,null)),(n()(),c._21(null,["\n  "])),(n()(),c._18(0,null,null,4,"div",[["class","message-body"]],null,null,null,null,null)),(n()(),c._21(null,["\n    "])),(n()(),c._18(0,null,null,1,"p",[["class","message-content"]],null,null,null,null,null)),(n()(),c._21(null,["",""])),(n()(),c._21(null,["\n  "])),(n()(),c._21(null,["\n"]))],null,function(n,t){n(t,5,0,t.component.msgContent)})}function a(n){return c._17(0,[c._23(671088640,1,{messageBox:0}),(n()(),c._21(null,["\n"])),(n()(),c._18(0,null,null,19,"div",[["class","game-container"]],null,[[null,"keyup"]],function(n,t,e){var o=!0,r=n.component;if("keyup"===t){o=!1!==r.moveTo(e)&&o}return o},null,null)),(n()(),c._21(null,["\n  "])),(n()(),c._18(0,null,null,10,"div",[["class","game-header"]],null,null,null,null,null)),(n()(),c._21(null,["\n    "])),(n()(),c._18(0,null,null,1,"h1",[["class","title clearfix"]],null,null,null,null,null)),(n()(),c._21(null,["2048"])),(n()(),c._21(null,["\n    "])),(n()(),c._18(0,null,null,1,"h2",[["class","score"]],null,null,null,null,null)),(n()(),c._21(null,["Scor：",""])),(n()(),c._21(null,["\n    "])),(n()(),c._18(0,null,null,1,"button",[["class","btn-new-game"]],null,[[null,"click"]],function(n,t,e){var o=!0,r=n.component;if("click"===t){o=!1!==r.initGameData()&&o}return o},null,null)),(n()(),c._21(null,["New Game"])),(n()(),c._21(null,["\n  "])),(n()(),c._21(null,["\n  "])),(n()(),c._18(0,null,null,4,"div",[["class","game-body"]],null,null,null,null,null)),(n()(),c._21(null,["\n    "])),(n()(),c._22(16777216,null,null,1,null,l)),c._19(802816,null,0,f.k,[c._2,c._3,c.m],{ngForOf:[0,"ngForOf"]},null),(n()(),c._21(null,["\n  "])),(n()(),c._21(null,["\n"])),(n()(),c._21(null,["\n\n"])),(n()(),c._22(16777216,null,null,1,null,u)),c._19(16384,null,0,f.j,[c._2,c._3],{ngIf:[0,"ngIf"]},null),(n()(),c._21(null,["\n"]))],function(n,t){var e=t.component;n(t,19,0,e.showArray),n(t,24,0,e.isShowMsg)},function(n,t){n(t,10,0,t.component.gameScore)})}function i(n){return c._17(0,[(n()(),c._18(0,null,null,1,"app-root",[],null,[["window","keyup"]],function(n,t,e){var o=!0;if("window:keyup"===t){o=!1!==c._24(n,1).moveTo(e)&&o}return o},a,g)),c._19(114688,null,0,h.a,[c._12],null,null)],function(n,t){n(t,1,0)},null)}var s=e("NhKt"),c=e("/oeL"),f=e("qbdv"),h=e("wQAS");e.d(t,"a",function(){return v});var d=[s.a],g=c._16({encapsulation:0,styles:d,data:{}}),v=c._25("app-root",h.a,i,{},{},[])},qtrl:function(n,t){function e(n){throw new Error("Cannot find module '"+n+"'.")}e.keys=function(){return[]},e.resolve=e,n.exports=e,e.id="qtrl"},wQAS:function(n,t,e){"use strict";var o=e("/oeL"),r=e("5v8a"),l=(e.n(r),e("zxIf"));e.d(t,"a",function(){return u});var u=function(){function n(n){this.renderer=n,this.isShowMsg=!1,this.showArray=[[]],this.gameStatus=0,this.gameScore=0}return n.prototype.ngOnInit=function(){var n=this;this.initGameData(),setTimeout(function(){n.setNotNew()},500)},n.prototype.initGameData=function(){for(var n=0;n<4;n++){for(var t=[],e=0;e<4;e++)t.push(new l.a(0,!1));this.showArray[n]=t}this.log(this.showArray);var o=this.generateRandomNumber(),r=this.generateRandomNumber();this.showArray[o.row][o.column].value=o.value,this.showArray[o.row][o.column].isNew=!0,this.showArray[r.row][r.column].value=r.value,this.showArray[r.row][r.column].isNew=!0,this.gameStatus=0,this.gameScore=0},n.prototype.showMsg=function(n){this.msgContent=n,this.isShowMsg=!0},n.prototype.hideMsg=function(n){n.stopPropagation(),this.isShowMsg=!1},n.prototype.addNumber=function(n){if(this.log("addNumber"),this.isFull(n))return this.log("matrix is full!"),n;var t=this.generateRandomNumber();return 0!==n[t.row][t.column].value?this.addNumber(n):(0===n[t.row][t.column].value&&(n[t.row][t.column].value=t.value,n[t.row][t.column].isNew=!0),n)},n.prototype.generateRandomNumber=function(){var n=Math.round(9*Math.random())>7?4:2;return new l.b(Math.round(3*Math.random()),Math.round(3*Math.random()),n)},n.prototype.isFull=function(n){for(var t=0,e=n;t<e.length;t++)for(var o=e[t],r=0,l=o;r<l.length;r++){var u=l[r];if(0===u.value)return!1}return!0},n.prototype.moveTo=function(n){var t=this;if(-1!==this.gameStatus){switch(n.keyCode){case 37:this.showArray=this.moveLeftOrRight(this.showArray,"left");break;case 38:this.showArray=this.moveUpOrDown(this.showArray,"up");break;case 39:this.showArray=this.moveLeftOrRight(this.showArray,"right");break;case 40:this.showArray=this.moveUpOrDown(this.showArray,"down")}setTimeout(function(){t.setNotNew()},500),this.checkStatus(this.showArray)}},n.prototype.moveUpOrDown=function(n,t){this.log("up");var e=this.deepCopyArray(n);return this.log(t),n=this.moveRow(this.mergeRow(this.moveRow(n,t),t),t),this.compareArray(e,n)?n:this.addNumber(n)},n.prototype.moveLeftOrRight=function(n,t){this.log("up");var e=this.deepCopyArray(n);return this.log(t),n=this.moveCol(this.mergeCol(this.moveCol(n,t),t),t),this.compareArray(e,n)?n:this.addNumber(n)},n.prototype.moveRow=function(n,t,e){if(void 0===e&&(e=1),e===n.length)return n;var o=1;switch(t){case"up":o=-1;break;case"down":o=1}for(var r in n)for(var l in n[r])if(n.hasOwnProperty(+r+o)){var u=+r+o,a=+r;0===n[u][l].value&&(n[u][l].value=n[a][l].value,n[a][l].value=0)}return this.moveRow(n,t,e+1),n},n.prototype.mergeRow=function(n,t,e){void 0===e&&(e=1),this.log("mergeRow");var o=n.length;if(e===o)return n;var r=1;switch(t){case"up":for(var l in n)for(var u in n[l])if(n.hasOwnProperty(+l+r)){var a=+l+r,i=+l;0!==n[a][u].value&&n[a][u].value!==n[i][u].value||(n[i][u].value+=n[a][u].value,0!==n[a][u].value&&(this.gameScore+=n[i][u].value),n[a][u].value=0)}break;case"down":r=-1;for(var l in n)for(var u in n[l])if(n.hasOwnProperty(o-1-+l+r)){var a=o-1-+l+r,i=o-1-+l;0!==n[a][u].value&&n[a][u].value!==n[i][u].value||(n[i][u].value+=n[a][u].value,0!==n[a][u].value&&(this.gameScore+=n[i][u].value),n[a][u].value=0)}}return n},n.prototype.moveCol=function(n,t,e){if(void 0===e&&(e=1),e===n[0].length)return n;var o=1;switch(t){case"left":o=-1;break;case"right":o=1}for(var r in n)for(var l in n[r])if(n[r].hasOwnProperty(+l+o)){var u=+l+o,a=+l;0===n[r][u].value&&(n[r][u].value=n[r][a].value,n[r][a].value=0)}return this.moveCol(n,t,e+1),n},n.prototype.mergeCol=function(n,t,e){void 0===e&&(e=1),this.log("mergeCol");var o=n[0].length;if(e===o)return n;var r=1;switch(t){case"left":for(var l in n)for(var u in n[l])if(n[l].hasOwnProperty(+u+r)){var a=+u+r,i=+u;0!==n[l][a].value&&n[l][a].value!==n[l][i].value||(n[l][i].value+=n[l][a].value,0!==n[l][a].value&&(this.gameScore+=n[l][i].value),n[l][a].value=0)}break;case"right":r=-1;for(var l in n)for(var u in n[l])if(n[l].hasOwnProperty(o-1-+u+r)){var a=o-1-+u+r,i=o-1-+u;0!==n[l][a].value&&n[l][a]!==n[l][i]||(n[l][i].value+=n[l][a].value,0!==n[l][a].value&&(this.gameScore+=n[l][i].value),n[l][a].value=0)}}return n},n.prototype.checkStatus=function(n){this.deepCopyArray(n);this.log("检查输赢"),this.checkLose(n),this.checkWin(n)},n.prototype.checkLose=function(n){var t=this;if(this.isFull(n)){for(var e in n)for(var o in n[e])if(n.hasOwnProperty(+e+1)&&!(n[e][o].value!==n[+e+1][o].value))return!1;for(var e in n)for(var o in n[e])if(n[e].hasOwnProperty(+o+1)&&!(n[e][o].value!==n[e][+o+1].value))return!1;return this.gameStatus=-1,setTimeout(function(){t.gameAlert("game over")},100),!0}},n.prototype.checkWin=function(n){for(var t=this,e=0,o=n;e<o.length;e++)for(var r=o[e],l=0,u=r;l<u.length;l++){var a=u[l];2048===a.value&&0===this.gameStatus&&(this.gameStatus=1,setTimeout(function(){t.gameAlert("you win!")},100))}},n.prototype.setNotNew=function(){for(var n=0,t=this.showArray;n<t.length;n++)for(var e=t[n],o=0,r=e;o<r.length;o++){var l=r[o];l.isNew=!1}},n.prototype.gridCellStyle=function(n){var t="3em";switch(n>=1024&&(t="2em",n>=16348&&(t="1.5em")),n){case 2:return{"background-color":"#ffd180","font-size":t};case 4:return{"background-color":"#ffab40","font-size":t};case 8:return{color:"#fff","background-color":"#ff9100","font-size":t};case 16:return{color:"#fff","background-color":"#ff6d00","font-size":t};case 32:return{color:"#fff","background-color":"#ffab91","font-size":t};case 64:return{color:"#fff","background-color":"#ff8a65","font-size":t};case 128:return{color:"#fff","background-color":"#ff7043","font-size":t};case 256:return{color:"#fff","background-color":"#ff5722","font-size":t};case 512:return{color:"#fff","background-color":"#f4511e","font-size":t};case 1024:return{color:"#fff","background-color":"#e64a19","font-size":t};case 2048:return{color:"#fff","background-color":"#d84315","font-size":t};case 4096:return{color:"#fff","background-color":"#bf360c","font-size":t};case 8192:case 16384:return{color:"#fff","background-color":"#dd2c00","font-size":t}}},n.prototype.compareArray=function(n,t){if(this.log("compareArray"),this.log(n),this.log(t),n.length!==t.length)return this.log(!1),!1;for(var e in n)for(var o in n[e])if(n[e][o].value!==t[e][o].value)return this.log(!1),!1;return this.log(!0),!0},n.prototype.deepCopyArray=function(n){return this.log("deepCopyArray"),n.map(function(n){return n.map(function(n){return new l.a(n.value,!1)})})},n.prototype.gameAlert=function(n){this.showMsg(n)},n.prototype.log=function(n){console.log(n)},n.ctorParameters=function(){return[{type:o._12}]},n}()},zxIf:function(n,t,e){"use strict";e.d(t,"a",function(){return o}),e.d(t,"b",function(){return r});var o=function(){function n(n,t){this.isNew=t,this.value=n}return n}(),r=function(){function n(n,t,e){this.row=n,this.column=t,this.value=e}return n}()}},[0]);